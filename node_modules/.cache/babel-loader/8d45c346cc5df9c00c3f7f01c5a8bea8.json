{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from'react-router-dom';import PlaceList from\"../components/PlaceList\";import ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import{useHttpClient}from'../../shared/hooks/http-hook';// const DUMMY_PLACES = [\n//   {\n//     id: 'p1',\n//     title: 'Empire State Building',\n//     description: 'One of the most famous sky scrapers in the world!',\n//     imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\n//     address: '20 W 34th St, New York, NY 10001',\n//     location: {\n//       lat: 40.7484405,\n//       lng: -73.9878584\n//     },\n//     creator: 'u1'\n//   },\n//   {\n//     id: 'p2',\n//     title: 'Empire State Building',\n//     description: 'One of the most famous sky scrapers in the world!',\n//     imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\n//     address: '20 W 34th St, New York, NY 10001',\n//     location: {\n//       lat: 40.7484405,\n//       lng: -73.9878584\n//     },\n//     creator: 'u2'\n//   }\n// ];\n// // 렌더링 하는 루트 JS 에서 이렇게 UserPlaces 를 렌더링 한다면\n// // :userId 에 들어가는 동적인 값이 \"useParams().userId;\" 여기로 호출 된다.\n// <Route path=\"/:userId/places\" exact>\n//   <UserPlaces />\n// </Route>\nconst UserPlaces=()=>{const[loadedPlaces,setLoadedPlaces]=useState();const{isLoading,error,sendRequest,clearError}=useHttpClient();const userId=useParams().userId;useEffect(()=>{const fetchPlaces=async()=>{try{const responseData=await sendRequest(`${process.env.REACT_APP_BASE}${process.env.REACT_APP_PLACES_ROUTE}/user/${userId}`);setLoadedPlaces(responseData.places);}catch(err){}};fetchPlaces();},[sendRequest,userId]);const placeDeletedHandler=deletedPlaceId=>{setLoadedPlaces(prevPlaces=>prevPlaces.filter(place=>place.id!==deletedPlaceId));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{showError:error,onClear:clearError}),isLoading&&/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(LoadingSpinner,null)),!isLoading&&loadedPlaces&&/*#__PURE__*/React.createElement(PlaceList,{items:loadedPlaces,onDeletePlace:placeDeletedHandler}));};export default UserPlaces;","map":{"version":3,"names":["React","useEffect","useState","useParams","PlaceList","ErrorModal","LoadingSpinner","useHttpClient","UserPlaces","loadedPlaces","setLoadedPlaces","isLoading","error","sendRequest","clearError","userId","fetchPlaces","responseData","process","env","REACT_APP_BASE","REACT_APP_PLACES_ROUTE","places","err","placeDeletedHandler","deletedPlaceId","prevPlaces","filter","place","id","createElement","Fragment","showError","onClear","className","items","onDeletePlace"],"sources":["C:/Users/IMWONHYEOK/study/react/section_13_front/src/places/pages/UserPlaces.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from 'react-router-dom';\n\nimport PlaceList from \"../components/PlaceList\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\n\nimport { useHttpClient } from '../../shared/hooks/http-hook';\n\n// const DUMMY_PLACES = [\n//   {\n//     id: 'p1',\n//     title: 'Empire State Building',\n//     description: 'One of the most famous sky scrapers in the world!',\n//     imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\n//     address: '20 W 34th St, New York, NY 10001',\n//     location: {\n//       lat: 40.7484405,\n//       lng: -73.9878584\n//     },\n//     creator: 'u1'\n//   },\n//   {\n//     id: 'p2',\n//     title: 'Empire State Building',\n//     description: 'One of the most famous sky scrapers in the world!',\n//     imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\n//     address: '20 W 34th St, New York, NY 10001',\n//     location: {\n//       lat: 40.7484405,\n//       lng: -73.9878584\n//     },\n//     creator: 'u2'\n//   }\n// ];\n\n\n// // 렌더링 하는 루트 JS 에서 이렇게 UserPlaces 를 렌더링 한다면\n// // :userId 에 들어가는 동적인 값이 \"useParams().userId;\" 여기로 호출 된다.\n// <Route path=\"/:userId/places\" exact>\n//   <UserPlaces />\n// </Route>\n\nconst UserPlaces = () => {\n  const [ loadedPlaces, setLoadedPlaces ] = useState();\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n  const userId = useParams().userId;\n\n  useEffect( () => {\n    const fetchPlaces = async () => {\n      try{\n        const responseData = await sendRequest(\n          `${process.env.REACT_APP_BASE}${process.env.REACT_APP_PLACES_ROUTE}/user/${userId}`\n        );\n        setLoadedPlaces(responseData.places);\n      }catch(err) { }\n    };\n    fetchPlaces();\n  }, [sendRequest, userId]);\n\n  const placeDeletedHandler = (deletedPlaceId) => {\n    setLoadedPlaces(prevPlaces =>\n      prevPlaces.filter(place => place.id !== deletedPlaceId)\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal showError={error} onClear={clearError} />\n      {isLoading && (\n        <div className=\"center\">\n          <LoadingSpinner />\n        </div>\n      )}\n      {!isLoading && loadedPlaces && <PlaceList items={loadedPlaces} onDeletePlace={placeDeletedHandler}/>}\n    </React.Fragment>\n  );\n};\n\nexport default UserPlaces;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAE5C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,UAAU,KAAM,+CAA+C,CACtE,MAAO,CAAAC,cAAc,KAAM,mDAAmD,CAE9E,OAASC,aAAa,KAAQ,8BAA8B,CAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,YAAY,CAAEC,eAAe,CAAE,CAAGR,QAAQ,CAAC,CAAC,CACpD,KAAM,CAAES,SAAS,CAAEC,KAAK,CAAEC,WAAW,CAAEC,UAAW,CAAC,CAAGP,aAAa,CAAC,CAAC,CAErE,KAAM,CAAAQ,MAAM,CAAGZ,SAAS,CAAC,CAAC,CAACY,MAAM,CAEjCd,SAAS,CAAE,IAAM,CACf,KAAM,CAAAe,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAG,CACD,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAJ,WAAW,CACpC,GAAGK,OAAO,CAACC,GAAG,CAACC,cAAc,GAAGF,OAAO,CAACC,GAAG,CAACE,sBAAsB,SAASN,MAAM,EACnF,CAAC,CACDL,eAAe,CAACO,YAAY,CAACK,MAAM,CAAC,CACtC,CAAC,MAAMC,GAAG,CAAE,CAAE,CAChB,CAAC,CACDP,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACH,WAAW,CAAEE,MAAM,CAAC,CAAC,CAEzB,KAAM,CAAAS,mBAAmB,CAAIC,cAAc,EAAK,CAC9Cf,eAAe,CAACgB,UAAU,EACxBA,UAAU,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAACC,EAAE,GAAKJ,cAAc,CACxD,CAAC,CACH,CAAC,CAED,mBACEzB,KAAA,CAAA8B,aAAA,CAAC9B,KAAK,CAAC+B,QAAQ,mBACb/B,KAAA,CAAA8B,aAAA,CAACzB,UAAU,EAAC2B,SAAS,CAAEpB,KAAM,CAACqB,OAAO,CAAEnB,UAAW,CAAE,CAAC,CACpDH,SAAS,eACRX,KAAA,CAAA8B,aAAA,QAAKI,SAAS,CAAC,QAAQ,eACrBlC,KAAA,CAAA8B,aAAA,CAACxB,cAAc,KAAE,CACd,CACN,CACA,CAACK,SAAS,EAAIF,YAAY,eAAIT,KAAA,CAAA8B,aAAA,CAAC1B,SAAS,EAAC+B,KAAK,CAAE1B,YAAa,CAAC2B,aAAa,CAAEZ,mBAAoB,CAAC,CACrF,CAAC,CAErB,CAAC,CAED,cAAe,CAAAhB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}