{"ast":null,"code":"import React,{useState,useContext}from'react';import Card from\"../../shared/components/UIElements/Card\";import Button from\"../../shared/components/FormElements/Button\";import Modal from\"../../shared/components/UIElements/Modal\";import Map from\"../../shared/components/UIElements/Map\";import ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import{useHttpClient}from\"../../shared/hooks/http-hook\";import{AuthContext}from'../../shared/context/auth-context';import'./PlaceItem.css';// import { useHistory } from \"react-router-dom\";\nconst PlaceItem=props=>{const{isLoading,error,sendRequest,clearError}=useHttpClient();const auth=useContext(AuthContext);const[showMap,setShowMap]=useState(false);const[showConfirmModal,setShowConfirmModal]=useState(false);// const history = useHistory();\nconst openMapHandler=()=>setShowMap(true);const closeMapHandler=()=>setShowMap(false);const showDeleteWarningHandler=()=>{setShowConfirmModal(true);};const cancelDeleteHandler=()=>{setShowConfirmModal(false);};const confirmDeleteHandler=async()=>{setShowConfirmModal(false);try{await sendRequest(`${process.env.REACT_APP_BASE}${process.env.REACT_APP_PLACES_ROUTE}/${props.id}`,\"DELETE\",null,{Authorization:`Bearer: ${auth.token}`});props.onDelete(props.id);// props.onDeletePlace(props.id);\n}catch(err){}};//\n// if (isLoading) {\n//   return (\n//     <div className=\"center\">\n//       <LoadingSpinner />\n//     </div>\n//   );\n// }\n//\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{showError:error,onClear:clearError}),/*#__PURE__*/React.createElement(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(Button,{onClick:closeMapHandler},\"CLOSE\")},/*#__PURE__*/React.createElement(\"div\",{className:\"map-container\"},/*#__PURE__*/React.createElement(Map,{center:props.coordinates,zoom:16}))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are u sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:cancelDeleteHandler},\"CANCEL\"),/*#__PURE__*/React.createElement(Button,{danger:true,onClick:confirmDeleteHandler},\"DELETE\"))},/*#__PURE__*/React.createElement(\"p\",null,\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\")),/*#__PURE__*/React.createElement(\"li\",{className:\"place-item\"},/*#__PURE__*/React.createElement(Card,{className:\"place-item__content\"},isLoading&&/*#__PURE__*/React.createElement(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__image\"},/*#__PURE__*/React.createElement(\"img\",{src:`${process.env.REACT_APP_BASE}/${props.image}`,alt:props.title})),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__info\"},/*#__PURE__*/React.createElement(\"h2\",null,props.title),/*#__PURE__*/React.createElement(\"h3\",null,props.address),/*#__PURE__*/React.createElement(\"p\",null,\" \",props.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__actions\"},/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:openMapHandler},\"VIEW ON MAP \"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{to:`/places/${props.id}`},\"Edit\"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{danger:true,onClick:showDeleteWarningHandler},\"DELETE\")))));};export default PlaceItem;","map":{"version":3,"names":["React","useState","useContext","Card","Button","Modal","Map","ErrorModal","LoadingSpinner","useHttpClient","AuthContext","PlaceItem","props","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","process","env","REACT_APP_BASE","REACT_APP_PLACES_ROUTE","id","Authorization","token","onDelete","err","createElement","Fragment","showError","onClear","show","onCancel","header","address","contentClass","footerClass","footer","onClick","className","center","coordinates","zoom","inverse","danger","asOverlay","src","image","alt","title","description","userId","creatorId","to"],"sources":["C:/Users/IMWONHYEOK/study/react/section_13_front/src/places/components/PlaceItem.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElements/Modal\";\nimport Map from \"../../shared/components/UIElements/Map\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\n\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\n\nimport { AuthContext } from '../../shared/context/auth-context';\n\nimport './PlaceItem.css';\n// import { useHistory } from \"react-router-dom\";\n\nconst PlaceItem = props => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false)\n  // const history = useHistory();\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n      await sendRequest(\n        `${process.env.REACT_APP_BASE}${process.env.REACT_APP_PLACES_ROUTE}/${props.id}`,\n        \"DELETE\",\n        null,\n        { Authorization : `Bearer: ${auth.token}`}\n      );\n      props.onDelete(props.id);\n      // props.onDeletePlace(props.id);\n    } catch (err) {}\n  };\n\n  //\n  // if (isLoading) {\n//   return (\n  //     <div className=\"center\">\n  //       <LoadingSpinner />\n  //     </div>\n  //   );\n  // }\n  //\n\n  return (\n    <React.Fragment>\n      <ErrorModal showError={error} onClear={clearError} />\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n          {/* <h2>The Map!</h2> */}\n        </div>\n      </Modal>\n\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are u sure?\"\n        footerClass=\"place-item__modal-actions\" footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>CANCEL</Button>\n            <Button danger onClick={confirmDeleteHandler}>DELETE</Button>\n          </React.Fragment>\n        }>\n        <p>\n          Do you want to proceed and delete this place? Please note that it\n          can't be undone thereafter.\n        </p>\n      </Modal>\n\n      {/* <Modal header=\"Are u sure?\" footerClass=\"place-item__modal-actions\" footer={\n          <button>CANCEL</button>\n      }>\n        <p>\n          Do u want to proceed and delete this place? please note.\n        </p>\n      </Modal> */}\n\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner asOverlay />}\n          <div className=\"place-item__image\">\n            <img src={`${process.env.REACT_APP_BASE}/${props.image}`} alt={props.title} />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p> {props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>VIEW ON MAP </Button>\n            {/* {auth.isLoggedIn &&  <- 이렇게 하면 A 사용자가 B 사용자의 장소까지 Update 및 Delete 할 수 있게 되므로 */}\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>Edit</Button>\n            )}\n            {/* {auth.isLoggedIn && ( */}\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>DELETE</Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}